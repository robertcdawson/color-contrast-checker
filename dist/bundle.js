(()=>{"use strict";function e(e,t,n){const o=[e,t,n].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*o[0]+.7152*o[1]+.0722*o[2]}function t(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}const n=[],o=document.getElementById("result"),r=document.getElementById("color1"),s=document.getElementById("color2"),a=document.createElement("div");a.classList.add("result-bar-parent");const c=document.createElement("div");c.classList.add("result-bar"),a.appendChild(c),o.appendChild(a),document.getElementById("eyedropper").addEventListener("click",(async a=>{if(!window.EyeDropper)return void(o.textContent="Your browser does not support the EyeDropper API");let[d]=await chrome.tabs.query({active:!0,currentWindow:!0});const l=new EyeDropper;0===n.length?(s.classList.remove("colorHighlight"),r.classList.add("colorHighlight")):(r.classList.remove("colorHighlight"),s.classList.add("colorHighlight")),l.open().then((a=>{if(n.length<=1?(n.push(a.sRGBHex),1===n.length?r.style.background="transparent":s.style.background="transparent"):(n.shift(),n.push(a.sRGBHex)),r.style.backgroundColor=n[0],s.style.backgroundColor=n[1],2===n.length){const r=function(t,n){const o=e(t[0],t[1],t[2]),r=e(n[0],n[1],n[2]);return((Math.max(o,r)+.05)/(Math.min(o,r)+.05)).toFixed(2)}(t(n[0]),t(n[1])),s=function(e){let t="";switch(!0){case e>=7:t="great";break;case e>=4.5&&e<7:t="good";break;case e>=3&&e<4.5:t="okay";break;case e<3:t="poor"}return t}(r),a=1===r?0:Math.round(r/21*100);c.style.width=`${a}%`,c.style.backgroundColor="great"===s?"#00ff00":"good"===s?"#ffff00":"okay"===s?"#ffa500":"#ff0000";const d=`<p class="result-description">${n[0]} and ${n[1]} have a contrast ratio of ${r}, which is <strong>${s}</strong>.</p>`,l=o.querySelector(".result-description");l&&o.removeChild(l),o.insertAdjacentHTML("beforeend",d)}})).catch((e=>{o.textContent=e}))}))})();
(()=>{"use strict";function t(t,e,s){const n=[t,e,s].map((function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*n[0]+.7152*n[1]+.0722*n[2]}function e(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}const s=[],n=document.getElementById("result"),o=document.getElementById("color1"),r=document.getElementById("color2"),c=document.createElement("div");c.classList.add("result-bar-parent");const a=document.createElement("div");a.classList.add("result-bar"),c.appendChild(a),n.appendChild(c),document.getElementById("eyedropper").addEventListener("click",(async c=>{if(!window.EyeDropper)return void(n.textContent="Your browser does not support the EyeDropper API");let[i]=await chrome.tabs.query({active:!0,currentWindow:!0});const l=new EyeDropper;0===s.length?(r.classList.remove("colorHighlight"),o.classList.add("colorHighlight")):(o.classList.remove("colorHighlight"),r.classList.add("colorHighlight")),l.open().then((c=>{if(s.length<=1?(s.push(c.sRGBHex),1===s.length?o.style.background="transparent":r.style.background="transparent"):(s.shift(),s.push(c.sRGBHex)),o.style.backgroundColor=s[0],r.style.backgroundColor=s[1],2===s.length){const o=function(e,s){const n=t(e[0],e[1],e[2]),o=t(s[0],s[1],s[2]);return((Math.max(n,o)+.05)/(Math.min(n,o)+.05)).toFixed(2)}(e(s[0]),e(s[1])),r=function(t){let e="";switch(!0){case t>=7:e="great";break;case t>=4.5&&t<7:e="good";break;case t>=3&&t<4.5:e="okay";break;case t<3:e="poor"}return e}(o),c=1===o?0:Math.round(o/21*100);a.style.width=`${c}%`,a.style.backgroundColor="great"===r?"#00ff00":"good"===r?"#ffff00":"okay"===r?"#ffa500":"#ff0000";const i=`<p class="result-description">${s[0]} and ${s[1]} have a contrast ratio of ${o}, which is <strong>${r}</strong>.</p>`,l=n.querySelector(".result-description");l&&n.removeChild(l),n.insertAdjacentHTML("beforeend",i)}})).catch((t=>{n.textContent=t}))})),document.getElementById("instructionsHideShow").addEventListener("click",(t=>{t.preventDefault();const e=document.getElementById("instructionsArrow"),s=document.getElementById("instructionsList");e.classList.contains("down")?(e.classList.remove("down"),e.classList.add("right")):(e.classList.remove("right"),e.classList.add("down")),console.log("instructionsList.classList",s.classList),s.classList.toggle("visible")}))})();